{"ast":null,"code":"import _objectSpread from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import Button from'@material-ui/core/Button';import MenuItem from'@material-ui/core/MenuItem';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';import{Grid,Card}from'@material-ui/core';import'./Question.css';import services from'../../services/services';import{Redirect,useHistory}from'react-router-dom';var useStyles=makeStyles(function(theme){return{root:{'& .MuiTextField-root':{margin:theme.spacing(1)},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1),width:'25ch'}},formControl:{margin:theme.spacing(1)},option:{display:\"block\"},option1:{float:\"left\"},img:{float:\"right\",width:\"50px\"},button:{margin:theme.spacing(1)},dropdown:{zIndex:1,transform:\"translate(14px, 13px) scale(1)\",padding:\"10.5px 14px\"},create:{marginTop:\"55px\",textAlign:\"center\",color:\"#133b5c\"}};});function QuestionForm(){var classes=useStyles();var history=useHistory();var _useState=useState([{questionTitle:'',optionsArray:[{optionLabel:\"\",optionImg:\"\"},{optionLabel:\"\",optionImg:\"\"}]}]),_useState2=_slicedToArray(_useState,2),question=_useState2[0],setQuestion=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),categoryOption=_useState6[0],setCategoryOption=_useState6[1];var data=JSON.parse(localStorage.getItem('friend'));var jwt=data['jwt'];var userId=data['userId'];useEffect(function(){getAllCategory();},[]);var getAllCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var options,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options={method:'Get',headers:{\"Apiuserid\":\"49507884\",\"Scope\":\"In.QuizApp.READ\",\"Authorization\":\"quizApp-oauthtoken \".concat(jwt)}};_context.next=3;return services.getAllCategory(options);case 3:result=_context.sent;setCategory(result.data.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getAllCategory(){return _ref.apply(this,arguments);};}();var addQuestion=function addQuestion(event,index){setQuestion([].concat(_toConsumableArray(question),[{questionTitle:'',optionsArray:[{optionLabel:\"\",optionImg:\"\"},{optionLabel:\"\",optionImg:\"\"}]}]));};var removeQuestion=function removeQuestion(index){var list=_toConsumableArray(question);list.splice(index,1);setQuestion(list);};var addOption=function addOption(questionIndex){var options=question[questionIndex];options.optionsArray.push({optionLabel:\"\",optionImg:\"\"});var previous=question.slice(0,questionIndex);var current=[options];var next=question.slice(questionIndex+1,question===null||question===void 0?void 0:question.length);setQuestion([].concat(_toConsumableArray(previous),current,_toConsumableArray(next)));};var removeOption=function removeOption(questionIndex,answerIndex){var options=question[questionIndex];var newArray=options.optionsArray.filter(function(value,index){return index!==answerIndex;});var previous=question.slice(0,questionIndex);var current=[_objectSpread(_objectSpread({},options),{},{optionsArray:_toConsumableArray(newArray)})];var next=question.slice(questionIndex+1,question===null||question===void 0?void 0:question.length);setQuestion([].concat(_toConsumableArray(previous),current,_toConsumableArray(next)));};var handleChange=function handleChange(event){if(event.target.value!=\"\"&&event.target.value!=null){setCategoryOption(event.target.value);}else{alert(\"please take category\");return true;}};var handleOption=function handleOption(questionIndex,index,event){if(event.target.value===\"\"&&event.target.value===null||event.target.value.length<=2){alert(\"please fill option\");return true;}else{var values=_toConsumableArray(question);values[questionIndex].optionsArray[index].optionLabel=event.target.value;setQuestion(values);}};var handleImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(questionIndex,index,event){var values,imgpath,data,currentTime,time,ext,file_path,myimg,img,options,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:values=_toConsumableArray(question);imgpath=event.target.files[0];data=imgpath.name;currentTime=new Date();time=currentTime.getTime();ext=data.split('.');file_path=questionIndex+''+index+''+ext[0]+time+'.'+ext[1];myimg=data.replace(data,file_path);img=new FormData();img.append(\"optionImg\",imgpath);img.append(\"newName\",myimg);options={method:'POST',headers:{\"Apiuserid\":\"49507884\",\"Scope\":\"In.QuizApp.INSERT\",'Content-Type':'multipart/form-data',\"Authorization\":\"quizApp-oauthtoken \".concat(jwt)}};_context2.next=14;return services.getImage(img,options);case 14:result=_context2.sent;values[questionIndex].optionsArray[index].optionImg=file_path;setQuestion(values);case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function handleImage(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();var handleQuestion=function handleQuestion(index,event){if(categoryOption.length<=0){alert(\"Please Select your Category first!\");return;}if(event.target.value===\"\"&&event.target.value===null||event.target.value.length<=3){alert(\"please fill question\");return true;}else{var values=_toConsumableArray(question);values[index].questionTitle=event.target.value;setQuestion(values);}};var LoggedIn=false;var addTask=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var data,fileUpload,options,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=true;question.map(function(item){if(item.questionTitle===\"\"){console.log(item.questionTitle);alert(\"Question Cannot be blank!\");data=false;return;}else{data=true;}item.optionsArray.map(function(item1){if(item1.optionLabel==\"\"){alert(\"Please enter all answer options\");data=false;return;}else{data=true;return;}});});if(!(data==true)){_context3.next=9;break;}fileUpload={category:categoryOption,userId:userId,questionsArray:question};options={method:'POST',headers:{\"Apiuserid\":\"49507884\",\"Scope\":\"In.QuizApp.INSERT\",'Content-Type':'multipart/form-data',\"Authorization\":\"quizApp-oauthtoken \".concat(jwt)}};_context3.next=7;return services.addQuestion(fileUpload,options);case 7:result=_context3.sent;return _context3.abrupt(\"return\",/*#__PURE__*/React.createElement(Redirect,{to:\"/category\",push:true}));case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function addTask(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"h1\",{className:classes.create},\"Create Question\"),/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:true}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:11,sm:6,md:6,lg:4},/*#__PURE__*/React.createElement(\"div\",{className:\"createnumber\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Category\")),/*#__PURE__*/React.createElement(Card,{className:\"create-list\"},/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\"},/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl,fullWidth:true},/*#__PURE__*/React.createElement(Select,{label:\"Category\",id:\"category\",value:categoryOption,onChange:handleChange},category.map(function(option,index){return/*#__PURE__*/React.createElement(MenuItem,{key:index,value:option.categoryId},option.title);})))))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:true})),question.map(function(que,index){return/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:true}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:11,sm:6,md:6,lg:4,className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"createnumber\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Question\")),/*#__PURE__*/React.createElement(\"div\",{className:\"createnumber1\"},question.length>1&&/*#__PURE__*/React.createElement(\"button\",{className:\"delete\",onClick:function onClick(){return removeQuestion(index);}},\"X\")),/*#__PURE__*/React.createElement(Card,{className:\"create-list\"},/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"question\",className:\"que-text\",name:\"question\",placeholder:\"Enter Question\"// onFocus={()=>checkCategory()}\n,onBlur:function onBlur(event){return handleQuestion(index,event);},required:true})),que.optionsArray.map(function(option,optIndex){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"answerContainer\"},/*#__PURE__*/React.createElement(\"input\",{className:\"create-answer\",placeholder:\"Answer\",onBlur:function onBlur(event){return handleOption(index,optIndex,event);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"quizwrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"quizfile-upload2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",className:\"quizoption2\",defaultValue:option.optionImg,onChange:function onChange(event){return handleImage(index,optIndex,event);},required:true}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/image/option.png\",height:\"40px\"}))),optIndex>1&&/*#__PURE__*/React.createElement(\"button\",{className:\"delete\",onClick:function onClick(){return removeOption(index,optIndex);}},\"X\")));}),/*#__PURE__*/React.createElement(\"div\",{className:\"create-label\"},/*#__PURE__*/React.createElement(\"button\",{className:\"addoption\",onClick:function onClick(){return addOption(index);}},\"Add Option\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"create-label\"},index===question.length-1&&/*#__PURE__*/React.createElement(\"button\",{className:\"addoption\",onClick:function onClick(event){return addQuestion(event,index);}},\"Add Question\"))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:true}));}),/*#__PURE__*/React.createElement(\"div\",{className:\"addWrapper\"},/*#__PURE__*/React.createElement(Button,{className:\"addTAsk\",variant:\"contained\",onClick:addTask},\"Create\"))));}export default QuestionForm;","map":{"version":3,"sources":["/home/tanu/Workspace/quiz12/src/admin/question/QuestionForm.js"],"names":["React","useState","useEffect","makeStyles","Container","Button","MenuItem","FormControl","Select","Grid","Card","services","Redirect","useHistory","useStyles","theme","root","margin","spacing","textField","marginLeft","marginRight","width","formControl","option","display","option1","float","img","button","dropdown","zIndex","transform","padding","create","marginTop","textAlign","color","QuestionForm","classes","history","questionTitle","optionsArray","optionLabel","optionImg","question","setQuestion","category","setCategory","categoryOption","setCategoryOption","data","JSON","parse","localStorage","getItem","jwt","userId","getAllCategory","options","method","headers","result","addQuestion","event","index","removeQuestion","list","splice","addOption","questionIndex","push","previous","slice","current","next","length","removeOption","answerIndex","newArray","filter","value","handleChange","target","alert","handleOption","values","handleImage","imgpath","files","name","currentTime","Date","time","getTime","ext","split","file_path","myimg","replace","FormData","append","getImage","handleQuestion","LoggedIn","addTask","map","item","console","log","item1","fileUpload","questionsArray","categoryId","title","que","optIndex"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { Grid,Card } from '@material-ui/core';\nimport './Question.css'\nimport services from '../../services/services';\nimport { Redirect, useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '25ch',\n    },\n\n  },\n  formControl: {\n    margin: theme.spacing(1),\n\n  },\n  option: {\n    display: \"block\"\n  },\n  option1: {\n    float: \"left\"\n  },\n  img: {\n    float: \"right\",\n    width: \"50px\"\n  },\n\n  button: {\n    margin: theme.spacing(1),\n  },\n  dropdown: {\n    zIndex: 1,\n    transform: \"translate(14px, 13px) scale(1)\",\n    padding: \"10.5px 14px\"\n  },\n  create:{\n    marginTop:\"55px\",\n    textAlign:\"center\",\n    color:\"#133b5c\"\n  }\n}))\n\nfunction QuestionForm() {\n  const classes = useStyles()\n  const history = useHistory()\n  const [question, setQuestion] = useState(\n    [\n      {\n        questionTitle: '',\n        optionsArray: [\n          { optionLabel: \"\", optionImg: \"\" },\n          { optionLabel: \"\", optionImg: \"\" }\n        ]\n      },\n    ]\n  )\n\n  const [category, setCategory] = useState([])\n  const [categoryOption, setCategoryOption] = useState([])\n  const data = JSON.parse(localStorage.getItem('friend'));\n  const jwt = data['jwt'];\n  var userId = data['userId'];\n  useEffect(() => {\n       getAllCategory();\n  }, [])\n\n  const  getAllCategory = async () => {\n      const options = {\n          method: 'Get',\n          headers: {\n              \"Apiuserid\": \"49507884\",\n              \"Scope\": \"In.QuizApp.READ\",\n              \"Authorization\": `quizApp-oauthtoken ${jwt}`,\n          }\n      }\n      const result = await services.getAllCategory(options)\n      setCategory(result.data.data)\n  };\n\n  const addQuestion = (event,index) => {\n    \n      setQuestion([\n        ...question,\n        {\n          questionTitle: '',\n          optionsArray: [\n            { optionLabel: \"\", optionImg: \"\" },\n            { optionLabel: \"\", optionImg: \"\" }\n          ]\n        }\n      ])\n   \n    }\n\n  const removeQuestion = (index) => {\n    const list = [...question]\n    list.splice(index, 1);\n    setQuestion(list);\n  }\n  const addOption = (questionIndex) => {\n    const options = question[questionIndex];\n    options.optionsArray.push({ optionLabel: \"\", optionImg: \"\" });\n    const previous = question.slice(0, questionIndex);\n    const current = [options];\n    const next = question.slice(questionIndex + 1, question?.length);\n    setQuestion([\n      ...previous,\n      ...current,\n      ...next\n    ]);\n  }\n\n  const removeOption = (questionIndex, answerIndex) => {\n    const options = question[questionIndex];\n    const newArray = options.optionsArray.filter((value, index) => index !== answerIndex);\n    const previous = question.slice(0, questionIndex);\n    const current = [{ ...options, optionsArray: [...newArray] }];\n    const next = question.slice(questionIndex + 1, question?.length);\n    setQuestion([\n      ...previous,\n      ...current,\n      ...next\n    ]);\n  }\n\n  const handleChange = (event) => {\n    if(event.target.value != \"\" && event.target.value !=null)\n    {\n      setCategoryOption(event.target.value);\n    }\n    else{\n      alert(\"please take category\")\n      return true;\n    }\n    \n  };\n\n  const handleOption = (questionIndex, index, event) => {\n    if((event.target.value === \"\" && event.target.value ===null)||(event.target.value.length <=2 ))\n    {\n      alert(\"please fill option\");\n      return true;\n    }\n    else{\n      const values = [...question];\n     values[questionIndex].optionsArray[index].optionLabel = event.target.value;\n     setQuestion(values);\n    }\n  }\n\n  const handleImage = async(questionIndex, index, event) => {\n    const values = [...question];\n     var imgpath=event.target.files[0]\n    const data = imgpath.name;\n    const currentTime = new Date();\n    const time = currentTime.getTime();\n    const ext= data.split('.')\n    var file_path= questionIndex+'' + index+'' +ext[0]+time+'.'+ext[1];\n    var myimg=data.replace(data,file_path)\n    var img=new FormData()\n    img.append(\"optionImg\",imgpath);\n    img.append(\"newName\",myimg)\n    const options = {\n      method: 'POST',\n      headers: {\n        \"Apiuserid\": \"49507884\",\n        \"Scope\": \"In.QuizApp.INSERT\",\n        'Content-Type': 'multipart/form-data',\n        \"Authorization\": `quizApp-oauthtoken ${jwt}`,\n      }\n    }\n    const result = await services.getImage(img, options);\n    values[questionIndex].optionsArray[index].optionImg=file_path;\n    setQuestion(values);\n  }\n\n  const handleQuestion = (index, event) => {\n    if(categoryOption.length<=0){\n      alert(\"Please Select your Category first!\" );\n      return;\n    }\n    \n    if((event.target.value === \"\" && event.target.value ===null)||(event.target.value.length <=3))\n    {\n      alert(\"please fill question\")\n      return true;\n    }\n    else{\n      const values = [...question];\n    values[index].questionTitle = event.target.value;\n    setQuestion(values);\n    }\n   \n\n  }\n  var LoggedIn=false\n  const addTask = async () => { \n    let data=true;\n      question.map((item)=>{\n             if(item.questionTitle === \"\")\n             {\n              console.log(item.questionTitle)\n              alert(\"Question Cannot be blank!\")\n              data= false;\n              return;\n             }\n             else{\n              data= true;\n             }\n             item.optionsArray.map((item1)=>{\n               if(item1.optionLabel==\"\"){\n               alert(\"Please enter all answer options\")\n               data= false;\n               return;\n               }\n               else{\n                data= true;\n                return;\n               }\n             })\n            \n             \n    })\n    if(data==true){\n      const fileUpload={\n      category:categoryOption,\n      userId:userId,\n      questionsArray:question\n    }\n    const options = {\n      method: 'POST',\n      headers: {\n        \"Apiuserid\": \"49507884\",\n        \"Scope\": \"In.QuizApp.INSERT\",\n        'Content-Type': 'multipart/form-data',\n        \"Authorization\": `quizApp-oauthtoken ${jwt}`,\n      }\n    }\n    const result = await services.addQuestion(fileUpload, options)\n   return<Redirect to=\"/category\" push={true}/>\n  }\n  \n  }\n \n  return (\n    <div>\n      <Container>\n        <h1 className={classes.create}>Create Question</h1>\n              <Grid container>\n                    <Grid item xs></Grid>\n                    <Grid item xs={11} sm={6} md={6} lg={4} >\n                    <div className=\"createnumber\">\n                        <h3>Category</h3>\n                    </div>\n                      <Card className=\"create-list\">\n                       <Grid container justify=\"center\">\n                             <FormControl className={classes.formControl} fullWidth>\n                              <Select\n                                label=\"Category\"\n                                id=\"category\"\n                                value={categoryOption}\n                                onChange={handleChange}\n                                 >\n                               {\n                                category.map((option, index) => {\n                                  return (\n                                <MenuItem key={index} value={option.categoryId}>{option.title}</MenuItem>\n                                )})}\n                              </Select>\n                              </FormControl>\n                              </Grid>\n                      </Card>\n                    </Grid>\n                    <Grid item xs></Grid>\n                  </Grid>\n              {\n                question.map((que, index) => (\n                  <Grid container>\n                    <Grid item xs></Grid>\n                    <Grid item xs={11} sm={6} md={6} lg={4} className=\"card\">\n                    <div className=\"createnumber\">\n                        <h3>Question</h3>\n                    </div>\n                    <div className=\"createnumber1\">\n                    {question.length > 1 &&<button className=\"delete\" onClick={() => removeQuestion(index)}>X</button>}\n                   </div>\n                      <Card className=\"create-list\">\n                                  <Grid\n                                  container\n                                  justify=\"center\"\n                                 >\n                               <input  type=\"text\" id=\"question\" className=\"que-text\"\n                            name=\"question\"\n                            placeholder=\"Enter Question\"\n                           // onFocus={()=>checkCategory()}\n                            onBlur={event => handleQuestion(index, event)}\n                            required/>\n                               </Grid>\n                               {que.optionsArray.map((option, optIndex) => (\n                               <>\n                              <div className=\"answerContainer\">\n                               {/* <input type=\"radio\"  name={`option_${index}`}onClick={event => radioclick(index, optIndex, event)}/> */}\n                               <input className=\"create-answer\" placeholder=\"Answer\"  onBlur={event => handleOption(index, optIndex, event)}/>\n                               <div className=\"quizwrapper\">\n                                <div className=\"quizfile-upload2\">\n                                  <input type=\"file\" className=\"quizoption2\"\n                                    defaultValue={option.optionImg}\n                                    onChange={event =>handleImage(index, optIndex, event)}\n                                    required/>\n                                  <img src=\"/assets/image/option.png\" height=\"40px\" />\n                                </div>\n                                </div>\n                               {optIndex > 1 &&<button className=\"delete\"  onClick={() => removeOption(index, optIndex)}>X</button>}\n                              </div>\n                              </>\n                               ))}\n                              <div className=\"create-label\">\n                              {\n                              <button className=\"addoption\"   onClick={() => addOption(index)}>Add Option</button>}\n                              </div>\n                      </Card>\n                      <div className=\"create-label\">\n                      {index === question.length - 1 &&  <button className=\"addoption\"   onClick={(event) => addQuestion(event,index)}>Add Question</button>}\n                     </div>\n                    </Grid>\n                    <Grid item xs></Grid>\n                  </Grid>\n                  \n                ))}\n              <div className=\"addWrapper\">\n                <Button\n                  className=\"addTAsk\"\n                  variant=\"contained\"\n                  onClick={addTask}\n                >\n                  Create\n                 </Button>\n\n              </div>\n      </Container>\n    </div>\n  )\n}\n\nexport default QuestionForm"]},"metadata":{},"sourceType":"module"}