{"ast":null,"code":"import _objectSpread from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{makeStyles,withStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import RemoveCircleIcon from'@material-ui/icons/RemoveCircle';import IconButton from'@material-ui/core/IconButton';import DeleteIcon from'@material-ui/icons/Delete';import AddIcon from'@material-ui/icons/Add';import AddCircleIcon from'@material-ui/icons/AddCircle';import Icon from'@material-ui/core/Icon';import InputLabel from'@material-ui/core/InputLabel';import MenuItem from'@material-ui/core/MenuItem';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';import InputBase from'@material-ui/core/InputBase';import{Grid}from'@material-ui/core';import'./Question.css';import services from'../../services/services';var useStyles=makeStyles(function(theme){return{root:{'& .MuiTextField-root':{margin:theme.spacing(1)},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1),width:'25ch'}},formControl:{margin:theme.spacing(1)},option:{display:\"block\"},option1:{float:\"left\"},img:{float:\"right\",width:\"50px\"},button:{margin:theme.spacing(1)},dropdown:{zIndex:1,transform:\"translate(14px, 13px) scale(1)\",padding:\"10.5px 14px\"}};});function QuestionForm(){var classes=useStyles();var _useState=useState([{questionTitle:'',optionsArray:[{optionLabel:\"\",optionImg:\"\"},{optionLabel:\"\",optionImg:\"\"}]}]),_useState2=_slicedToArray(_useState,2),question=_useState2[0],setQuestion=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),categoryOption=_useState6[0],setCategoryOption=_useState6[1];var data=JSON.parse(localStorage.getItem('friend'));var jwt=data['jwt'];var userId=data['userId'];useEffect(function(){getCategory();},[]);var getCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var options,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options={method:'Get',headers:{\"Apiuserid\":\"49507884\",\"Scope\":\"In.QuizApp.READ\",\"Authorization\":\"quizApp-oauthtoken \".concat(jwt)}};_context.next=3;return services.getCategory(options);case 3:result=_context.sent;setCategory(result.data.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getCategory(){return _ref.apply(this,arguments);};}();var addQuestion=function addQuestion(){setQuestion([].concat(_toConsumableArray(question),[{questionTitle:'',optionsArray:[{optionLabel:\"\",optionImg:\"\"},{optionLabel:\"\",optionImg:\"\"}]}]));};var removeQuestion=function removeQuestion(index){var list=_toConsumableArray(question);list.splice(index,1);setQuestion(list);};var addOption=function addOption(questionIndex){var options=question[questionIndex];options.optionsArray.push({optionLabel:\"\",optionImg:\"\"});var previous=question.slice(0,questionIndex);var current=[options];var next=question.slice(questionIndex+1,question===null||question===void 0?void 0:question.length);setQuestion([].concat(_toConsumableArray(previous),current,_toConsumableArray(next)));};var removeOption=function removeOption(questionIndex,answerIndex){var options=question[questionIndex];var newArray=options.optionsArray.filter(function(value,index){return index!==answerIndex;});var previous=question.slice(0,questionIndex);var current=[_objectSpread(_objectSpread({},options),{},{optionsArray:_toConsumableArray(newArray)})];var next=question.slice(questionIndex+1,question===null||question===void 0?void 0:question.length);setQuestion([].concat(_toConsumableArray(previous),current,_toConsumableArray(next)));};var handleChange=function handleChange(event){setCategoryOption(event.target.value);};var handleOption=function handleOption(questionIndex,index,event){var values=_toConsumableArray(question);values[questionIndex].optionsArray[index].optionLabel=event.target.value;setQuestion(values);};var handleImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(questionIndex,index,event){var values,imgpath,data,currentTime,time,ext,file_path,myimg,img,options,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:values=_toConsumableArray(question);imgpath=event.target.files[0];data=imgpath.name;currentTime=new Date();time=currentTime.getTime();ext=data.split('.');file_path=questionIndex+'_'+index+'_'+ext[0]+time+'.'+ext[1];myimg=data.replace(data,file_path);img=new FormData();img.append(\"optionImg\",imgpath);img.append(\"newName\",myimg);options={method:'POST',headers:{\"Apiuserid\":\"49507884\",\"Scope\":\"In.QuizApp.INSERT\",'Content-Type':'multipart/form-data',\"Authorization\":\"quizApp-oauthtoken \".concat(jwt)}};_context2.next=14;return services.getImage(img,options);case 14:result=_context2.sent;values[questionIndex].optionsArray[index].optionImg=file_path;setQuestion(values);case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function handleImage(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();var handleQuestion=function handleQuestion(index,event){var values=_toConsumableArray(question);values[index].questionTitle=event.target.value;setQuestion(values);};var addTask=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var fileUpload,options,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// const fileUpload = new FormData();\n//data.append('questionsArray', JSON.stringify(question));\n// let questionArray = [];\n// for (const dataKey of question) {\n//   let optionArray = dataKey?.optionsArray;\n//   data.append('hello',question);\n//   for (const previewKey of dataKey.optionsArray) {\n//     optionArray.push(previewKey);\n//   }\n//   questionArray.push({\n//     question: dataKey.question,\n//     options: optionArray\n//   });\n// }\n// fileUpload.append(\"category\", categoryOption);\n// fileUpload.append(\"userId\", userId);\n// fileUpload.append(\"questionArray\", JSON.stringify(question));\nfileUpload={category:categoryOption,userId:userId,questionsArray:question};options={method:'POST',headers:{\"Apiuserid\":\"49507884\",\"Scope\":\"In.QuizApp.INSERT\",'Content-Type':'multipart/form-data',\"Authorization\":\"quizApp-oauthtoken \".concat(jwt)}};_context3.next=4;return services.addQuestion(fileUpload,options);case 4:result=_context3.sent;console.log(result);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function addTask(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Create Question\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.root,noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3,className:classes.gridContainer,justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:5},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl,fullWidth:true},/*#__PURE__*/React.createElement(InputLabel,{id:\"demo-simple-select-label\"},\"Category\"),/*#__PURE__*/React.createElement(Select,{label:\"Category\",id:\"category\",value:categoryOption,onChange:handleChange},category.map(function(option,index){return/*#__PURE__*/React.createElement(MenuItem,{key:index,value:option.categoryId},option.title);})))),question.map(function(que,index){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{key:index,container:true,spacing:1,className:classes.gridContainer},/*#__PURE__*/React.createElement(Grid,{item:true,xs:7,sm:7,md:7},/*#__PURE__*/React.createElement(TextField,{label:\"Question\",id:\"standard-size-small\",fullWidth:true,defaultValue:que.question,onChange:function onChange(event){return handleQuestion(index,event);},type:\"question\",size:\"small\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4,sm:4,md:4},question.length>1&&/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return removeQuestion(index);}},/*#__PURE__*/React.createElement(DeleteIcon,null)),index===question.length-1&&/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return addQuestion();}},/*#__PURE__*/React.createElement(AddCircleIcon,null)))),que.optionsArray.map(function(option,optIndex){return/*#__PURE__*/React.createElement(\"div\",{key:optIndex,className:classes.option},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3,className:classes.gridContainer},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:8,lg:7},/*#__PURE__*/React.createElement(TextField,{id:\"option2\",label:\"Option\",type:\"option2\",size:\"small\",defaultValue:option.optionLabel,className:classes.option1,fullWidth:true,onChange:function onChange(event){return handleOption(index,optIndex,event);}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:4},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"file-upload2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",className:\"option2\",defaultValue:option.optionImg,onChange:function onChange(event){return handleImage(index,optIndex,event);}}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/image/option.png\",height:\"40px\"}))),optIndex>1&&/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return removeOption(index,optIndex);}},/*#__PURE__*/React.createElement(DeleteIcon,{className:\"remove\"})),(que===null||que===void 0?void 0:que.optionsArray.length)-1===optIndex&&/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return addOption(index);}},/*#__PURE__*/React.createElement(AddIcon,{className:\"remove\"}))))));}));}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{className:\"btn\",size:\"medium\",variant:\"contained\",onClick:addTask},\"Create\")))))));}export default QuestionForm;","map":{"version":3,"sources":["/home/tanu/Workspace/quiz12/src/admin/question/QuestionForm.js"],"names":["React","useState","useEffect","makeStyles","withStyles","Container","TextField","Button","RemoveCircleIcon","IconButton","DeleteIcon","AddIcon","AddCircleIcon","Icon","InputLabel","MenuItem","FormControl","Select","InputBase","Grid","services","useStyles","theme","root","margin","spacing","textField","marginLeft","marginRight","width","formControl","option","display","option1","float","img","button","dropdown","zIndex","transform","padding","QuestionForm","classes","questionTitle","optionsArray","optionLabel","optionImg","question","setQuestion","category","setCategory","categoryOption","setCategoryOption","data","JSON","parse","localStorage","getItem","jwt","userId","getCategory","options","method","headers","result","addQuestion","removeQuestion","index","list","splice","addOption","questionIndex","push","previous","slice","current","next","length","removeOption","answerIndex","newArray","filter","value","handleChange","event","target","handleOption","values","handleImage","imgpath","files","name","currentTime","Date","time","getTime","ext","split","file_path","myimg","replace","FormData","append","getImage","handleQuestion","addTask","fileUpload","questionsArray","console","log","gridContainer","map","categoryId","title","que","optIndex"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddIcon from '@material-ui/icons/Add';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport Icon from '@material-ui/core/Icon';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputBase from '@material-ui/core/InputBase';\nimport { Grid } from '@material-ui/core';\nimport './Question.css'\nimport services from '../../services/services';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '25ch',\n    },\n\n  },\n  formControl: {\n    margin: theme.spacing(1),\n\n  },\n  option: {\n    display: \"block\"\n  },\n  option1: {\n    float: \"left\"\n  },\n  img: {\n    float: \"right\",\n    width: \"50px\"\n  },\n\n  button: {\n    margin: theme.spacing(1),\n  },\n  dropdown: {\n    zIndex: 1,\n    transform: \"translate(14px, 13px) scale(1)\",\n    padding: \"10.5px 14px\"\n  }\n}))\n\nfunction QuestionForm() {\n  const classes = useStyles()\n  const [question, setQuestion] = useState(\n    [\n      {\n        questionTitle: '',\n        optionsArray: [\n          { optionLabel: \"\", optionImg: \"\" },\n          { optionLabel: \"\", optionImg: \"\" }\n        ]\n      },\n    ]\n  )\n\n  const [category, setCategory] = useState([])\n  const [categoryOption, setCategoryOption] = useState([])\n  const data = JSON.parse(localStorage.getItem('friend'));\n  const jwt = data['jwt'];\n  var userId = data['userId'];\n\n  useEffect(() => {\n    getCategory();\n  }, [])\n\n  const getCategory = async () => {\n    const options = {\n      method: 'Get',\n      headers: {\n        \"Apiuserid\": \"49507884\",\n        \"Scope\": \"In.QuizApp.READ\",\n        \"Authorization\": `quizApp-oauthtoken ${jwt}`,\n      }\n    }\n    const result = await services.getCategory(options);\n    setCategory(result.data.data)\n  };\n\n  const addQuestion = () => {\n    setQuestion([\n      ...question,\n      {\n        questionTitle: '',\n        optionsArray: [\n          { optionLabel: \"\", optionImg: \"\" },\n          { optionLabel: \"\", optionImg: \"\" }\n        ]\n      }\n    ])\n  }\n\n  const removeQuestion = (index) => {\n    const list = [...question]\n    list.splice(index, 1);\n    setQuestion(list);\n  }\n  const addOption = (questionIndex) => {\n    const options = question[questionIndex];\n    options.optionsArray.push({ optionLabel: \"\", optionImg: \"\" });\n    const previous = question.slice(0, questionIndex);\n    const current = [options];\n    const next = question.slice(questionIndex + 1, question?.length);\n    setQuestion([\n      ...previous,\n      ...current,\n      ...next\n    ]);\n  }\n\n  const removeOption = (questionIndex, answerIndex) => {\n    const options = question[questionIndex];\n    const newArray = options.optionsArray.filter((value, index) => index !== answerIndex);\n    const previous = question.slice(0, questionIndex);\n    const current = [{ ...options, optionsArray: [...newArray] }];\n    const next = question.slice(questionIndex + 1, question?.length);\n    setQuestion([\n      ...previous,\n      ...current,\n      ...next\n    ]);\n  }\n\n  const handleChange = (event) => {\n    setCategoryOption(event.target.value);\n  };\n\n  const handleOption = (questionIndex, index, event) => {\n    const values = [...question];\n\n    values[questionIndex].optionsArray[index].optionLabel = event.target.value;\n    setQuestion(values);\n  }\n\n  const handleImage = async(questionIndex, index, event) => {\n    const values = [...question];\n     var imgpath=event.target.files[0]\n    const data = imgpath.name;\n    const currentTime = new Date();\n    const time = currentTime.getTime();\n    const ext= data.split('.')\n    var file_path= questionIndex+'_' + index+'_' +ext[0]+time+'.'+ext[1];\n    var myimg=data.replace(data,file_path)\n    var img=new FormData()\n    img.append(\"optionImg\",imgpath);\n    img.append(\"newName\",myimg)\n    const options = {\n      method: 'POST',\n      headers: {\n        \"Apiuserid\": \"49507884\",\n        \"Scope\": \"In.QuizApp.INSERT\",\n        'Content-Type': 'multipart/form-data',\n        \"Authorization\": `quizApp-oauthtoken ${jwt}`,\n      }\n    }\n    const result = await services.getImage(img, options);\n    values[questionIndex].optionsArray[index].optionImg=file_path;\n    setQuestion(values);\n  }\n  const handleQuestion = (index, event) => {\n\n    const values = [...question];\n\n    values[index].questionTitle = event.target.value;\n    setQuestion(values);\n\n  }\n\n  const addTask = async () => {\n\n    // const fileUpload = new FormData();\n    \n    \n    \n    //data.append('questionsArray', JSON.stringify(question));\n        // let questionArray = [];\n    // for (const dataKey of question) {\n    //   let optionArray = dataKey?.optionsArray;\n    //   data.append('hello',question);\n    //   for (const previewKey of dataKey.optionsArray) {\n    //     optionArray.push(previewKey);\n    //   }\n    //   questionArray.push({\n    //     question: dataKey.question,\n    //     options: optionArray\n    //   });\n    // }\n\n    // fileUpload.append(\"category\", categoryOption);\n    // fileUpload.append(\"userId\", userId);\n    // fileUpload.append(\"questionArray\", JSON.stringify(question));\n   \n    \n    const fileUpload={\n      category:categoryOption,\n      userId:userId,\n      questionsArray:question\n    }\n\n    const options = {\n      method: 'POST',\n      headers: {\n        \"Apiuserid\": \"49507884\",\n        \"Scope\": \"In.QuizApp.INSERT\",\n        'Content-Type': 'multipart/form-data',\n        \"Authorization\": `quizApp-oauthtoken ${jwt}`,\n      }\n    }\n    const result = await services.addQuestion(fileUpload, options)\n    console.log(result)\n  }\n\n  return (\n    <div>\n      <Container>\n        <h1>Create Question</h1>\n        <form className={classes.root} noValidate autoComplete=\"off\">\n          <Grid\n            container\n            spacing={3}\n            className={classes.gridContainer}\n            justify=\"center\"\n          >\n            <Grid item xs={12} sm={6} md={5}>\n              <div>\n                <FormControl className={classes.formControl} fullWidth>\n                  <InputLabel id=\"demo-simple-select-label\">Category</InputLabel>\n                  <Select\n                    label=\"Category\"\n                    id=\"category\"\n                    value={categoryOption}\n                    onChange={handleChange}\n                  >\n\n                    {\n                      category.map((option, index) => {\n                        return (\n\n                          <MenuItem key={index} value={option.categoryId}>{option.title}</MenuItem>\n                        )\n                      })\n                    }\n                  </Select>\n                </FormControl>\n\n              </div>\n              {\n                question.map((que, index) => (\n                  <div>\n                    <Grid key={index}\n                      container\n                      spacing={1}\n                      className={classes.gridContainer} >\n                      <Grid item xs={7} sm={7} md={7}>\n                        <TextField label=\"Question\" id=\"standard-size-small\"\n                          fullWidth\n                          defaultValue={que.question}\n                          onChange={event => handleQuestion(index, event)}\n                          type=\"question\" size=\"small\" />\n                      </Grid>\n                      <Grid item xs={4} sm={4} md={4}>\n                        {question.length > 1 && <IconButton\n                          onClick={() => removeQuestion(index)}\n                        >\n                          <DeleteIcon />\n                        </IconButton>}\n                        {index === question.length - 1 && <IconButton\n\n                          onClick={() => addQuestion()}\n                        >\n                          <AddCircleIcon />\n                        </IconButton>}\n                      </Grid>\n\n                    </Grid>\n                    {que.optionsArray.map((option, optIndex) => (\n                      <div key={optIndex} className={classes.option}>\n                        <Grid\n                          container\n                          spacing={3}\n                          className={classes.gridContainer}                   >\n                          <Grid item xs={12} sm={6} md={8} lg={7}>\n                            <TextField\n                              id=\"option2\"\n                              label=\"Option\"\n                              type=\"option2\"\n                              size=\"small\"\n                              defaultValue={option.optionLabel}\n                              className={classes.option1}\n                              fullWidth\n                              onChange={event => handleOption(index, optIndex, event)}\n                            />\n                          </Grid>\n                          <Grid item xs={12} sm={6} md={4}>\n                            <div>\n                              <div className=\"wrapper\">\n                                <div className=\"file-upload2\">\n                                  <input type=\"file\" className=\"option2\"\n                                    defaultValue={option.optionImg}\n                                    onChange={event => handleImage(index, optIndex, event)}\n                                  />\n                                  <img src=\"/assets/image/option.png\" height=\"40px\" />\n                                </div>\n                              </div>\n\n                              {\n\n                                optIndex > 1 && <IconButton\n                                  onClick={() => removeOption(index, optIndex)}\n                                >\n\n                                  <DeleteIcon\n                                    className=\"remove\" />\n                                </IconButton>\n\n                              }\n                              {\n                                que?.optionsArray.length - 1 === optIndex && <IconButton\n                                  onClick={() => addOption(index)}\n                                >\n                                  <AddIcon\n                                    className=\"remove\" />\n                                </IconButton>\n                              }\n\n                            </div>\n\n                          </Grid>\n                        </Grid>\n                      </div>\n                    ))}\n                  </div>\n\n\n                ))}\n              <div>\n                <Button\n                  className=\"btn\"\n                  size=\"medium\"\n                  variant=\"contained\"\n                  onClick={addTask}\n                >\n                  Create\n                 </Button>\n\n              </div>\n            </Grid>\n          </Grid>\n        </form>\n      </Container>\n    </div>\n  )\n}\n\nexport default QuestionForm\n"]},"metadata":{},"sourceType":"module"}