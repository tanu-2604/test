{"ast":null,"code":"import _toArray from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray\";import _toConsumableArray from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tanu/Workspace/quiz12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Grid,Card,CardContent}from'@material-ui/core';import{makeStyles,withStyles}from'@material-ui/core/styles';import'../style/questionlist.css';import LinearProgress from'@material-ui/core/LinearProgress';import services from'../../services/services';import{Redirect}from'react-router-dom';import Footer from'../footer/Footer';import{withCookies,Cookies,useCookies}from'react-cookie';import{Helmet}from'react-helmet';var BorderLinearProgress=withStyles(function(theme){return{root:{height:10,borderRadius:5,width:\"100%\"},colorPrimary:{backgroundColor:theme.palette.grey[theme.palette.type==='light'?200:700]},bar:{borderRadius:5,backgroundColor:'#FFDD52'}};})(LinearProgress);var useStyles=makeStyles(function(theme){return{gridContainer:{paddingLeft:\"20px\",paddingRight:\"20px\",background:\"#7555D9\",minHeight:\"100vh\"},paper:{padding:theme.spacing(2),textAlign:'center',color:theme.palette.text.secondary},pro:{textAlign:\"center\"}};});function QuestionList(_ref){var _tutorialSteps$active,_tutorialSteps$active2,_tutorialSteps$active3;var questionlist=_ref.questionlist,limit=_ref.limit;var classes=useStyles();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),stateCount=_React$useState2[0],setStateCount=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),activeStep=_React$useState4[0],setActiveStep=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),answerList=_React$useState6[0],setAnswerList=_React$useState6[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),createQuiz=_useState4[0],setCreateQuiz=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),result=_useState6[0],setResult=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),progress=_useState8[0],setProgress=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),count=_useState10[0],setCount=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),clickedAns=_useState12[0],setClickedAns=_useState12[1];var _useCookies=useCookies(['createId']),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];var dummyArr=[];var data=JSON.parse(localStorage.getItem('userInfo'));var createdBy=data['name'];var cookie=new Cookies();var categoryId;if(localStorage.getItem(\"categoryId\")){categoryId=JSON.parse(localStorage.getItem(\"categoryId\"));}else{categoryId=JSON.parse(cookie.get('categoryId'));}useEffect(function(){var index=questionlist.map(function(value,index){return index;});setStateCount(index);getCategory();},[]);var getCategory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var categoryData,options,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:categoryData={categoryId:categoryId};options={method:'POST',headers:{\"Apiuserid\":\"49507884\",\"Scope\":\"In.QuizApp.READ\"}};_context.next=4;return services.getCategory(categoryData,options);case 4:result=_context.sent;setTitle(result.data.data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getCategory(){return _ref2.apply(this,arguments);};}();var tutorialSteps=[{label:questionlist===null||questionlist===void 0?void 0:questionlist.question,options:questionlist===null||questionlist===void 0?void 0:questionlist.optionsArray}];if(questionlist===null||questionlist===void 0?void 0:questionlist.length){tutorialSteps=questionlist;}function showProgress(index){var increment=Math.ceil(count/limit*100);setProgress(increment);}var handleNext=function handleNext(id,label){var _questionlist$activeS;var qusId=(_questionlist$activeS=questionlist[activeStep])===null||_questionlist$activeS===void 0?void 0:_questionlist$activeS.qusId;var answer=label;var answerId=id;setClickedAns(id);setAnswerList([].concat(_toConsumableArray(answerList),[{qusId:qusId,answer:answer,answerId:answerId}]));if(limit>answerList.length+1){setTimeout(function(){stateCount.shift();activeStep=stateCount[0];setActiveStep(stateCount[0]);setCount(count+1);},500);}else{setTimeout(function(){handleSubmit([].concat(_toConsumableArray(answerList),[{qusId:qusId,answer:answer,answerId:answerId}]));},500);}showProgress(tutorialSteps[activeStep].qusId);};var handleSkip=function handleSkip(steps){stateCount.push(steps);stateCount.shift();activeStep=stateCount[0];setActiveStep(stateCount[0]);};var handleSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3){var _ref5,answerList,list,options,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref5=_toArray(_ref3),answerList=_ref5.slice(0);list={categoryId:categoryId,createdBy:createdBy,quizQuestions:answerList};options={method:'POST',headers:{\"Apiuserid\":\"49507884\",\"Scope\":\"In.QuizApp.INSERT\"}};_context2.next=5;return services.createQuestionQuiz(list,options);case 5:result=_context2.sent;setCreateQuiz(result.data.data.quizId);setResult(true);if(result.data.code===200){setResult(true);}case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x){return _ref4.apply(this,arguments);};}();if(localStorage.getItem(\"createId\")==null||localStorage.getItem(\"createId\")==[]){localStorage.setItem(\"createId\",JSON.stringify(dummyArr));setCookie(\"createId\",dummyArr);}else{dummyArr=JSON.parse(localStorage.getItem(\"createId\"));dummyArr.push(createQuiz);}console.log(cookie.get('createId'));if(result){localStorage.setItem(\"createId\",JSON.stringify(dummyArr));return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/sharelink\",state:{quizId:createQuiz}},push:true});}return/*#__PURE__*/React.createElement(\"div\",{className:classes.gridContainer},/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,title.title)),/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:true}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:11,sm:6,md:6,lg:4},/*#__PURE__*/React.createElement(\"div\",{justify:\"center\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"title\"},title.title)),/*#__PURE__*/React.createElement(\"div\",{justify:\"center\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"question\"},\"Question \",/*#__PURE__*/React.createElement(\"span\",null,count,\"/\",limit))),/*#__PURE__*/React.createElement(\"div\",{justify:\"center\"},/*#__PURE__*/React.createElement(BorderLinearProgress,{variant:\"determinate\",value:progress})),/*#__PURE__*/React.createElement(Card,{className:\"questioncard\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"questionname\"},(_tutorialSteps$active=tutorialSteps[activeStep])===null||_tutorialSteps$active===void 0?void 0:_tutorialSteps$active.question),/*#__PURE__*/React.createElement(\"div\",{className:\"optioncard\"},(_tutorialSteps$active2=tutorialSteps[activeStep])===null||_tutorialSteps$active2===void 0?void 0:(_tutorialSteps$active3=_tutorialSteps$active2.optionsArray)===null||_tutorialSteps$active3===void 0?void 0:_tutorialSteps$active3.map(function(options,index){return/*#__PURE__*/React.createElement(React.Fragment,null,options.optionImg.length?/*#__PURE__*/React.createElement(Grid,{container:true,className:clickedAns===options.optionId?'clickoption':'nonclickoption',onClick:function onClick(){handleNext(options.optionId,options.optionLabel);},key:index,id:\"cardbox\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:4,sm:4,md:4,lg:4,className:\"image-div\"},/*#__PURE__*/React.createElement(\"img\",{className:\"optionImg\",src:options.optionImg})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:8,sm:8,md:8,lg:8,className:\"optionbg\"},/*#__PURE__*/React.createElement(CardContent,{className:\"cardcontent\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"optioncontent\",id:\"cardText\"},options.optionLabel)))):/*#__PURE__*/React.createElement(Grid,{justify:\"center\",container:true,className:\"new\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:8,sm:8,md:8,lg:8,className:clickedAns===options.optionId?'newclickoption':'newnonclickoption',onClick:function onClick(){handleNext(options.optionId,options.optionLabel);},key:index,id:\"cardbox\"},/*#__PURE__*/React.createElement(CardContent,{className:\"newcontent\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"optioncontent\",id:\"cardText\"},options.optionLabel)))));})),/*#__PURE__*/React.createElement(\"div\",{className:\"start-wrapper\"},/*#__PURE__*/React.createElement(\"button\",{className:\"skip\",onClick:function onClick(){limit>answerList.length+1?handleSkip(activeStep):handleSubmit();}},\"Skip the Question\")))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:true})),/*#__PURE__*/React.createElement(Footer,null));}export default QuestionList;","map":{"version":3,"sources":["/home/tanu/Workspace/quiz12/src/user/question/QuestionList.js"],"names":["React","useState","useEffect","Grid","Card","CardContent","makeStyles","withStyles","LinearProgress","services","Redirect","Footer","withCookies","Cookies","useCookies","Helmet","BorderLinearProgress","theme","root","height","borderRadius","width","colorPrimary","backgroundColor","palette","grey","type","bar","useStyles","gridContainer","paddingLeft","paddingRight","background","minHeight","paper","padding","spacing","textAlign","color","text","secondary","pro","QuestionList","questionlist","limit","classes","title","setTitle","stateCount","setStateCount","activeStep","setActiveStep","answerList","setAnswerList","createQuiz","setCreateQuiz","result","setResult","progress","setProgress","count","setCount","clickedAns","setClickedAns","cookies","setCookie","dummyArr","data","JSON","parse","localStorage","getItem","createdBy","cookie","categoryId","get","index","map","value","getCategory","categoryData","options","method","headers","tutorialSteps","label","question","optionsArray","length","showProgress","increment","Math","ceil","handleNext","id","qusId","answer","answerId","setTimeout","shift","handleSubmit","handleSkip","steps","push","list","quizQuestions","createQuestionQuiz","quizId","code","setItem","stringify","console","log","pathname","state","optionImg","optionId","optionLabel"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react'\nimport { Grid, Card, CardContent } from '@material-ui/core';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport '../style/questionlist.css'\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport services from '../../services/services';\nimport { Redirect } from 'react-router-dom';\nimport Footer from '../footer/Footer';\nimport { withCookies, Cookies, useCookies } from 'react-cookie';\nimport { Helmet } from 'react-helmet';\n\nconst BorderLinearProgress = withStyles((theme) => ({\n  root: {\n    height: 10,\n    borderRadius: 5,\n    width: \"100%\",\n  },\n  colorPrimary: {\n    backgroundColor: theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\n  },\n  bar: {\n    borderRadius: 5,\n    backgroundColor: '#FFDD52',\n  },\n}))(LinearProgress);\n\nconst useStyles = makeStyles((theme) => ({\n  gridContainer: {\n    paddingLeft: \"20px\",\n    paddingRight: \"20px\",\n    background: \"#7555D9\",\n    minHeight: \"100vh\"\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  pro: {\n    textAlign: \"center\"\n  }\n\n}));\nfunction QuestionList({ questionlist,limit }) {\n  const classes = useStyles();\n  const [title, setTitle] = useState({})\n  const [stateCount, setStateCount] = React.useState([])\n  let [activeStep, setActiveStep] = React.useState(0);\n let [answerList, setAnswerList] = React.useState([]);\n  const [createQuiz, setCreateQuiz] = useState();\n  const [result, setResult] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [count, setCount] = useState(1);\n  const [clickedAns, setClickedAns] = useState(0);\n  const [cookies, setCookie] = useCookies(['createId']);\n  var dummyArr = []\n\n  const data = JSON.parse(localStorage.getItem('userInfo'));\n  const createdBy = data['name'];\n  const cookie = new Cookies();\n \n  var categoryId\n  if(localStorage.getItem(\"categoryId\"))\n  {\n   categoryId = JSON.parse(localStorage.getItem(\"categoryId\"));\n \n  }\n  else{\n      categoryId=JSON.parse(cookie.get('categoryId'));\n     \n  }\n\n  \n\n  useEffect(() => {\n    const index = questionlist.map((value, index) => index);\n    setStateCount(index)\n    getCategory();\n  }, [])\n\n  const getCategory = async () => {\n    const categoryData = {\n      categoryId: categoryId\n    }\n    const options = {\n      method: 'POST',\n      headers: {\n        \"Apiuserid\": \"49507884\",\n        \"Scope\": \"In.QuizApp.READ\",\n      }\n    }\n    const result = await services.getCategory(categoryData, options)\n    setTitle(result.data.data)\n    \n  };\n  let tutorialSteps = [\n    {\n      label: questionlist?.question,\n      options: questionlist?.optionsArray,\n    },\n  ];\n  if (questionlist?.length) {\n    tutorialSteps = questionlist;\n  }\n  function showProgress(index) {\n    var increment = Math.ceil((count) / (limit) * 100);\n    setProgress(increment)\n  }\n\n  const handleNext = (id, label) => {\n\n    const qusId = questionlist[activeStep]?.qusId;\n    const answer = label;\n    const answerId = id;\n    setClickedAns(id)\n    setAnswerList(\n      [...answerList, { qusId: qusId, answer: answer, answerId: answerId }]\n    )\n    if (limit > answerList.length + 1) {\n      setTimeout(()=>{\n        stateCount.shift();\n      activeStep = stateCount[0];\n      setActiveStep(stateCount[0]);\n      setCount(count + 1)\n      },500)\n   \n    }\n    else {\n      \n      setTimeout(() => {\n        \n        handleSubmit([...answerList, { qusId: qusId, answer: answer, answerId: answerId }])\n      }, 500)\n    }\n    showProgress(tutorialSteps[activeStep].qusId);\n  }\n\n  const handleSkip = (steps) => {\n    stateCount.push(steps);\n    stateCount.shift();\n    activeStep = stateCount[0];\n    setActiveStep(stateCount[0]);\n\n  };\n\n\n  \n  const handleSubmit = async ([...answerList]) => {\n    const list = {\n      categoryId: categoryId,\n      createdBy: createdBy,\n      quizQuestions: answerList\n    }\n\n    const options = {\n      method: 'POST',\n      headers: {\n        \"Apiuserid\": \"49507884\",\n        \"Scope\": \"In.QuizApp.INSERT\",\n      }\n    }\n    const result = await services.createQuestionQuiz(list, options)\n    setCreateQuiz(result.data.data.quizId)\n    setResult(true)\n    if (result.data.code === 200) {\n      setResult(true)\n    }\n  };\n\n  if (localStorage.getItem(\"createId\") == null||localStorage.getItem(\"createId\") == []) {\n    localStorage.setItem(\"createId\", JSON.stringify(dummyArr))\n    setCookie(\"createId\", dummyArr)\n  }\n  else {\n    dummyArr = JSON.parse(localStorage.getItem(\"createId\"));\n    dummyArr.push(createQuiz)\n  \n  }\n  console.log((cookie.get('createId')))\n  if (result) {\n    localStorage.setItem(\"createId\", JSON.stringify(dummyArr))\n\n    return (<Redirect to={{ pathname: \"/sharelink\", state: { quizId: createQuiz } }} push={true} />)\n  }\n\n  return (\n    <div className={classes.gridContainer}>\n      <Helmet>\n        <title>{title.title}</title>\n      </Helmet>\n      <Grid container>\n        <Grid item xs></Grid>\n        <Grid item xs={11} sm={6} md={6} lg={4} >\n          <div justify=\"center\">\n            <h3 className=\"title\">{title.title}</h3>\n          </div>\n          <div justify=\"center\">\n            <h4 className=\"question\">Question <span>{count}/{limit}</span></h4>\n          </div>\n          <div justify=\"center\">\n            <BorderLinearProgress variant=\"determinate\" value={progress} />\n          </div>\n          <Card className=\"questioncard\">\n\n            <h3 className=\"questionname\">{tutorialSteps[activeStep]?.question}</h3>\n            <div className=\"optioncard\">\n              {\n                tutorialSteps[activeStep]?.optionsArray?.map((options, index) => {\n                  return (\n                    <>\n                     {options.optionImg.length ?\n                      <Grid container className={ clickedAns === options.optionId ? 'clickoption' :  'nonclickoption'} onClick={() => { handleNext(options.optionId, options.optionLabel) }} key={index}id=\"cardbox\">\n                        <Grid item xs={4} sm={4} md={4} lg={4} className=\"image-div\" >\n                        <img className=\"optionImg\" src={options.optionImg} /> \n                        </Grid>\n                        <Grid item xs={8} sm={8} md={8} lg={8} className=\"optionbg\" >\n                          <CardContent className=\"cardcontent\">\n                            <h3 className=\"optioncontent\" id=\"cardText\">\n                              {options.optionLabel}\n                            </h3>\n                          </CardContent>\n                        </Grid>\n                     </Grid>\n                   : \n                   <Grid justify=\"center\" container className=\"new\">\n                      <Grid item xs={8} sm={8} md={8} lg={8} className={\n                      clickedAns === options.optionId ?'newclickoption' : 'newnonclickoption'} onClick={() => { handleNext(options.optionId, options.optionLabel) }} key={index} id=\"cardbox\">\n                          <CardContent className=\"newcontent\">\n                            <h3 className=\"optioncontent\" id=\"cardText\">\n                              {options.optionLabel}\n                            </h3>\n                          </CardContent>\n                      </Grid>\n                   </Grid>\n                   }\n                </>\n                  )\n                })\n              }\n            </div>\n            <div className=\"start-wrapper\">\n              <button className=\"skip\" onClick={() => { limit > answerList.length + 1 ? handleSkip(activeStep) : handleSubmit() }}>Skip the Question</button>\n            </div>\n          </Card>\n        </Grid>\n        <Grid item xs></Grid>\n      </Grid>\n      <Footer />\n    </div>\n  )\n}\n\nexport default QuestionList;\n"]},"metadata":{},"sourceType":"module"}